<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Financials - ERP PTT</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <aside class="sidebar">
    <h2>PTT ERP</h2>
    <nav>
      <a href="index.html"> Home</a>
      <a href="procurement.html">Procurement</a>
      <a class="active" href="#"> Financials</a>
    </nav>
  </aside>

  <div class="main">
    <div class="header">
      <h1> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Financials)</h1>
      <a href="#" class="btn">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</a>
    </div>

    <div class="card-container">
      <div class="card">
        <h3>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
        <div class="value">‡∏ø1,200,000</div>
      </div>
      <div class="card">
        <h3>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
        <div class="value">‡∏ø950,000</div>
      </div>
      <div class="card">
        <h3>‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</h3>
        <div class="value">‡∏ø250,000</div>
      </div>
    </div>

    <div class="table-section">
      <h2>üìÑ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
      <table>
        <thead>
          <tr>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>28 ‡∏Å.‡∏Ñ. 2568</td>
            <td>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏•‡∏≤‡∏ß‡∏î‡πå</td>
            <td>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</td>
            <td>-‡∏ø35,000</td>
             <td><button class="delete-btn">‡∏•‡∏ö</button></td>
          </tr>
          <tr>
            <td>25 ‡∏Å.‡∏Ñ. 2568</td>
            <td>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ A</td>
            <td>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</td>
            <td>+‡∏ø150,000</td>
             <td><button class="delete-btn">‡∏•‡∏ö</button></td>
          </tr>
          <tr>
            <td>22 ‡∏Å.‡∏Ñ. 2568</td>
            <td>‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</td>
            <td>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</td>
            <td>-‡∏ø12,500</td>
             <td><button class="delete-btn">‡∏•‡∏ö</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
<script>
  const btnAdd = document.querySelector('.btn');
  const tbody = document.querySelector('table tbody');

  // ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
  function attachDeleteEvent(button) {
    button.addEventListener('click', function() {
      if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
        const row = button.closest('tr');
        row.remove();
      }
    });
  }

  // ‡πÉ‡∏™‡πà event ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
  document.querySelectorAll('.delete-btn').forEach(attachDeleteEvent);

  btnAdd.addEventListener('click', function(e) {
    e.preventDefault();

    if(document.querySelector('#addForm')) return;

    const form = document.createElement('tr');
    form.id = 'addForm';
    form.innerHTML = `
      <td><input type="date" id="dateInput" required></td>
      <td><input type="text" id="descInput" placeholder="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" required></td>
      <td>
        <select id="typeInput" required>
          <option value="" disabled selected>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
          <option value="‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
          <option value="‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
        </select>
      </td>
      <td><input type="number" id="amountInput" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" required></td>
      <td>
        <button id="saveBtn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button id="cancelBtn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      </td>
    `;

    tbody.prepend(form);

    document.getElementById('saveBtn').addEventListener('click', function(e) {
      e.preventDefault();
      const date = document.getElementById('dateInput').value;
      const desc = document.getElementById('descInput').value.trim();
      const type = document.getElementById('typeInput').value;
      const amount = parseFloat(document.getElementById('amountInput').value);

      if (!date || !desc || !type || isNaN(amount)) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
        return;
      }

      const options = { year: 'numeric', month: 'short', day: 'numeric', timeZone: 'Asia/Bangkok' };
      const dt = new Date(date);
      const formattedDate = dt.toLocaleDateString('th-TH', options).replace(' ', ' ').replace('.', '');

      const newRow = document.createElement('tr');
      newRow.innerHTML = `
        <td>${formattedDate}</td>
        <td>${desc}</td>
        <td>${type}</td>
        <td>${type === '‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö' ? '+' : '-'}‡∏ø${amount.toLocaleString()}</td>
        <td><button class="delete-btn">‡∏•‡∏ö</button></td>
      `;

      form.remove();
      tbody.prepend(newRow);

      // ‡πÄ‡∏û‡∏¥‡πà‡∏° event ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏ß‡πÉ‡∏´‡∏°‡πà
      attachDeleteEvent(newRow.querySelector('.delete-btn'));
    });

    document.getElementById('cancelBtn').addEventListener('click', function(e) {
      e.preventDefault();
      form.remove();
    });
  });
</script>

</body>
</html>
